# 单元测试的艺术

##1. 入门

优秀单元测试的特性

1. 自动化,可重复执行
2. 很容易实现
3. 以后还有意义
4. 任何人都能一键运行
5. 速度很快
6. 独立于其他测试的运行
7. 如果它失败了,能快速定位问题

什么是集成测试

依赖到一个或多个真实依赖物,例如真实的系统时间,真实的文件系统,真实的数据库.

单元测试和集成测试的区别

集成测试会使用真实依赖物,而单元测试则把被测试单元和其以来无隔离开.

单元测试要点

1. 测试的命名 测试的可维护性 测试的可读性
2. 该成果的时候成果,该失败的时候失败

# 2 第一个单元测试

测试的命名
1. UnitOfWork_Scenario_ExpectedBehavior
2. UnitOfWork: 被测试的方法、一组方法或者一组类
3. Scenario: 测试进行的假设条件
4. ExpectedBehavior: 在测试场景指定的条件下,你对呗测试方法行为的预期

单元测试主要的三个行为

1. 准备(Arrange)对象,创建对象,进行必要的设置
2. 操作(Act)对象
3. 断言(Assert) 某件事情的预期

# 3 使用存根破除依赖

存根跟模拟对象的区别是: 两者类似,但是我们需要对模拟对象进行断言,而不会对存根进行断言

这里主要是为了烂代码去写更多的代码去实现测试,感觉会本末倒置

使用IOC可优好的测试.

同意赞同重构代码,使其易于测试

# 4 使用模拟对象进行交互测试

## 4.1 基于值测试,基于状态测试,和交互测试

伪对象、存根、模拟对象的区别

1. 伪对象指模拟对象/存根
2. 如果伪对象用于检测一个交互,这个伪对象为模拟对象,否则为存根

## 4.2 模拟对象和存根的区别

模拟对象和存根的根本区别: 存根永远不会导致测试失败,而模拟对象可以

这个作者也是醉了..

第三、四章说完就说这两有缺陷,,这抛砖引玉...好啊......擦..

# 5 隔离(模拟)框架

麻鸡...

#6 深入了解隔离框架

##6.2 优秀隔离框架的价值

提高测试健壮性的功能

1. 递归伪对象
2. 对行为和验证默认忽略参数
3. 非严格验证和行为
4. 大范围伪造

# 7. 测试层次和组织

# 7.4将测试类映射到源代码

1. 集成测试和单元测试必须分块
2. 将每个待测试类对应一个测试类
3. 当某个方法需要特别多的测试,新建对应的一个测试类

## 7.6 为应用程序构建测试API

### 7.6.3 把你的API介绍给开发人员

1. 偶尔结对编程,一带一
2. 准备小文档/速查表
3. 在团队会议上讨论API变更
4. 新人入职带过文档
5. 进行测试审查

#8 优秀单元测试的支柱

